/*
** my_getnbr.c for my_getnbr in /home/remy.machado/Pool_Second_Try/CPool_Day04
** 
** Made by remy machado
** Login   <remy.machado@epitech.net>
** 
** Started on  Thu Oct 20 10:46:41 2016 remy machado
** Last update Wed Feb 22 13:56:08 2017 remy
*/

#include <stdbool.h>
#include <stdlib.h>
#include "my_printf.h"

int	const_strlen(const char *str)
{
  int	i;

  i = 0;
  if (str == NULL)
    return (0);
  while (str[i] != '\0')
    ++i;
  return (i);
}

int	my_getnbr_part_2(const char *nbr, int index, bool is_neg)
{
  int	i;
  int	pow;
  int	sum;

  i = index;
  while (i != 0)
    {
      if (!my_char_isnum(nbr[i]))
	index = i - 1;
      --i;
    }
  pow = 1;
  sum = 0;
  while (index >= 0)
    {
      sum += (pow * (nbr[index] - '0'));
      pow *= 10;
      --index;
    }
  if (is_neg == true)
    sum *= (-1);
  return (sum);
}

int     my_getnbr(const char *nbr)
{
  int	i;
  int   index;
  bool  is_neg;

  i = 0;
  is_neg = false;
  while (!my_char_isnum(nbr[i]))
    ++i;
  if (nbr[i - 1] == '-')
    is_neg = true;
  nbr += i;
  index = (const_strlen(nbr) - 1);
  return (my_getnbr_part_2(nbr, index, is_neg));
}

/* int	my_getnbr(char *str) */
/* { */
/*   int	result; */
/*   int	i; */
/*   int	j; */
/*   int	length; */
/*   int	k; */

/*   i = 0; */
/*   k = 0; */
/*   result = 0; */
/*   while (!my_char_isnum(str[i])) */
/*     i++; */
/*   j = i; */
/*   length = my_strlen_num(str + i); */
/*   k = length - 1; */
/*   while (str[j] != str[i + length]) */
/*     { */
/*       result = result + ((str[j] - 48) * my_power_it(10, k)); */
/*       j++; */
/*       k--; */
/*     } */
/*   if (str[i - 1] == '-') */
/*     result *= (-1); */
/*   return (result); */
/* } */
